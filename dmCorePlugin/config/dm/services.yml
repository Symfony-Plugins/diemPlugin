parameters:

  search_engine.class:        dmSearchEngine
  
  search_index.class:         dmSearchIndex

  theme.class:                dmTheme

  stylesheet_compressor.class: dmStylesheetCompressor
  stylesheet_compressor.options:
    minify:                   true
    gz_compression:           true

  javascript_compressor.class: dmJavascriptCompressor
  javascript_compressor.options:
    minify:                   true
    gz_compression:           true

  auth_layout_helper.class:   dmAuthLayoutHelper

  cache_manager.class:        dmCacheManager
  cache_manager.options:
    meta_cache_class:         dmMetaCache

  doctrine_config.class:      dmDoctrineConfiguration

  filesystem.class:           dmFilesystem
  
  user_log.class:             dmUserLog
  user_log.options:
    file:                     'data/dm/log/user.log'
    
  browser.class:              dmBrowser
  
  user_log_entry.class:       dmUserLogEntry
    
  page_tree_watcher.class:    dmPageTreeWatcher
  
  file_backup.class:          dmFileBackup
  file_backup.options:
    dir:                      'data/dm/backup/filesystem'
    
  helper.class:               dmOoHelper
 
services:

  search_engine:
    class:                    %search_engine.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      user:                   @user
      logger:                 @logger
      serviceContainer:       @service_container

  search_index:
    class:                    %search_index.class%
    shared:                   false
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      logger:                 @logger

  asset_config:
    class:                    %asset_config.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      user:                   @user

  theme:
    class:                    %theme.class%
    shared:                   false
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      relative_url_root:      %request.relative_url_root%
      options:                %theme.options%

  stylesheet_compressor:
    class:                    %stylesheet_compressor.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      relative_url_root:      %request.relative_url_root%
      options:                %stylesheet_compressor.options%

  javascript_compressor:
    class:                    %javascript_compressor.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      relative_url_root:      %request.relative_url_root%
      options:                %javascript_compressor.options%

  auth_layout_helper:
    class:                    %auth_layout_helper.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      user:                   @user
      request:                @request
      response:               @response
      action_stack:           @action_stack
      helper:                 @helper

  doctrine_config:
    class:                    %doctrine_config.class%
    shared:                   true
    arguments:
      doctrine_manager:       @doctrine_manager
      dispatcher:             @dispatcher
      cache_manager:          @cache_manager

  filesystem:
    class:                    %filesystem.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      
  user_log:
    class:                    %user_log.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      service_container:      @service_container
      options:                %user_log.options%
      
  user_log_entry:
    class:                    %user_log_entry.class%
    shared:                   false
    arguments:
      service_container:      @service_container
      
  browser:
    class:                    %browser.class%
    shared:                   false
    arguments:
      dispatcher:             @dispatcher
      
  page_tree_watcher:
    class:                    %page_tree_watcher.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      
  file_backup:
    class:                    %file_backup.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher
      filesystem:             @filesystem
      options:                %file_backup.options%
  
  helper:
    class:                    %helper.class%
    shared:                   true
    arguments:
      context:                @context
      
  cache_manager:
    class:                    %cache_manager.class%
    shared:                   true
    arguments:
      dispatcher:             @dispatcher